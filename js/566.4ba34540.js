"use strict";(self["webpackChunkvue_mini_project"]=self["webpackChunkvue_mini_project"]||[]).push([[566],{3136:function(o,e,t){t.d(e,{O:function(){return a},Sq:function(){return s},pk:function(){return n}});const s={SUCCESS_LOGOUT:{message:"로그아웃 되었습니다.",type:"success"},SUCCESS_CREATE_USER_INFO:{message:"성공적으로 등록 되었습니다.",type:"success"},SUCCESS_UPDATE_USER_INFO:{message:"성공적으로 변경 되었습니다.",type:"success"},INVALID_ACCESS:{message:"올바르지 않은 접근입니다!",type:"danger"},INVALID_USER_INFO:{message:"올바르지 않은 계정입니다!",type:"warning"},INVALID_CREATE_USER_INFO:{message:"등록할 계정 정보를 다시 입력해주세요!",type:"warning"},INVALID_UPLOAD_USER_IMAGE_INFO:{message:"유저 프로필 이미지를 업로드 할 수 없습니다!",type:"warning"},FAILED_LOGOUT:{message:"오류로 인해 로그아웃 할 수 없습니다!",type:"danger"},FAILED_USER_INFO:{message:"오류로 인해 회원 정보를 불러올 수 없습니다!",type:"danger"},FAILED_UPDATE_USER_INFO:{message:"오류로 인해 회원 정보를 변경 할 수 없습니다!",type:"danger"}},n={FAILED_COINS_INFO:{message:"오류로 인해 코인 정보들을 불러올 수 없습니다!",type:"danger"}},a={SUCCESS_UPDATE_TODO_INFO:{message:"성공적으로 변경 되었습니다.",type:"success"},SUCCESS_DELETE_TODO_INFO:{message:"성공적으로 삭제 되었습니다.",type:"success"},INVALID_TODO_INFO:{message:"올바른 할 일의 내용을 입력해주세요!",type:"warning"},INVALID_UPDATE_TODO_INFO:{message:"올바른 할 일의 내용을 수정해주세요!",type:"warning"},FAILED_TODO_INFO:{message:"오류로 인해 작성한 할 일 정보를 불러올 수 없습니다!",type:"danger"},FAILED_TODOS_INFO:{message:"오류로 인해 작성한 할 일 정보들을 불러올 수 없습니다!",type:"danger"},FAILED_CREATE_TODO_INFO:{message:"오류로 인해 작성 할 수 없습니다!",type:"danger"},FAILED_UPDATE_TODO_INFO:{message:"오류로 인해 변경 할 수 없습니다!",type:"danger"},FAILED_DELETE_TODO_INFO:{message:"오류로 인해 삭제 할 수 없습니다!",type:"danger"}}},6955:function(o,e,t){t.d(e,{C$:function(){return l},SR:function(){return a},bG:function(){return d},bf:function(){return i},v1:function(){return c}});var s=t(4028),n=t(1992);const a=(o,e)=>{(0,s.e5)((0,s.v0)(),o,e).then((()=>{console.log("LOGIN SUCCESS.")})).catch((()=>{console.log("LOGIN FAILED!")}))},d=()=>(0,s.v0)().currentUser,l=(o,e)=>{(0,s.Xb)((0,s.v0)(),o,e).then((()=>{console.log("SIGN UP SUCCESS.")})).catch((()=>{console.log("SIGN UP FAILED!")}))},c=()=>{(0,s.w7)((0,s.v0)()).then((()=>{console.log("LOGOUT SUCCESS.")})).catch((()=>{console.log("LOGOUT FAILED!")}))},i=async(o,e)=>{const t=n.cF(),a=n.iH(t,`userimages/${o.uid}`),d=e;let l=null;void 0!==d&&n.KV(a,d).then((o=>{console.log("upload image: ",o),n.Jt(a)})),(0,s.ck)((0,s.v0)().currentUser,{displayName:o.displayName,photoURL:void 0===l?o.photoURL:l})}},4020:function(o,e,t){t.d(e,{CU:function(){return c},JV:function(){return l},SO:function(){return i},TC:function(){return r},hL:function(){return d},qj:function(){return a}});var s=t(6035),n=t(301);const a=async o=>{const e=(0,s.JU)(n.db,"todos",o),t=await(0,s.QT)(e);if(t.exists())return t.data();console.log("NONE DATA!")},d=async o=>{let e=[],t=(0,s.IO)((0,s.hJ)(n.db,"todos"),(0,s.ar)("userId","==",o),(0,s.ar)("enabled","==",!0),(0,s.Xo)("uploadDate","desc"));const a=await(0,s.PL)(t);return a.forEach((o=>{let t=o.data();t.docId=o.id,e.push(t)})),e},l=async o=>{await(0,s.ET)((0,s.hJ)(n.db,"todos"),o)},c=async(o,e)=>{const t=(0,s.JU)(n.db,"todos",o);await(0,s.r7)(t,e)},i=async(o,e)=>{const t=(0,s.JU)(n.db,"todos",o);await(0,s.r7)(t,{isCompleted:e})},r=async o=>{const e=(0,s.JU)(n.db,"todos",o);await(0,s.r7)(e,{enabled:!1})}},566:function(o,e,t){t.r(e),t.d(e,{default:function(){return go}});var s=t(3396);const n=o=>((0,s.dD)("data-v-23a36237"),o=o(),(0,s.Cn)(),o),a={key:0},d={class:"row todo-form-sticky"},l={key:0,class:"mb-3 bg-light text-success spinner-border",role:"status",style:{"margin-left":"45%"}},c=n((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),i=[c],r={key:1,class:"card p-3 bg-secondary text-center",style:{color:"white"}},u={class:"todo-list-overflow"},g={key:1,class:"input-group mb-3"},_=n((()=>(0,s._)("input",{class:"form-control",type:"text",value:"로그인 상태에서만 작성 가능합니다",disabled:"",readonly:""},null,-1)));function p(o,e,t,n,c,p){const m=(0,s.up)("TodoForm"),T=(0,s.up)("ToDoList");return(0,s.wg)(),(0,s.iD)("div",null,[n.isLogin?((0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",d,[(0,s.Wm)(m,{onAddTodo:n.addTodo},null,8,["onAddTodo"])]),n.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",l,i)),n.loading&&!n.todos.length?((0,s.wg)(),(0,s.iD)("div",r," 추가된 할 일이 없습니다. ")):(0,s.kq)("",!0),(0,s._)("div",u,[n.loading?((0,s.wg)(),(0,s.j4)(T,{key:0,todos:n.todos,onToggleTodo:n.toggleTodo,onDeleteTodo:n.deleteTodo},null,8,["todos","onToggleTodo","onDeleteTodo"])):(0,s.kq)("",!0)])])):((0,s.wg)(),(0,s.iD)("div",g,[_,(0,s._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[0]||(e[0]=(...o)=>n.moveToLogin&&n.moveToLogin(...o))}," 로그인 ")]))])}var m=t(4870),T=t(7139),v=t(1120),D=t(3136),O=t(6955),I=t(4020),y=t(9242),E=t(2268);const b=o=>((0,s.dD)("data-v-dfd377da"),o=o(),(0,s.Cn)(),o),C=["onClick"],L={class:"flex-glow-1"},h=["onUpdate:modelValue","onChange"],S={class:"container"},w={class:"row align-items-center"},F={class:"col-9"},U={class:"col",style:{"text-align":"right"}},f=["onClick"],A=b((()=>(0,s._)("span",{class:"material-icons"}," delete_outline ",-1))),N=[A];function k(o,e,t,n,a,d){const l=(0,s.up)("TodoDetail");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.todos,((o,t)=>((0,s.wg)(),(0,s.iD)("div",{key:o.docId?o.docId:t,class:"card mt-1 mb-1"},[(0,s._)("div",{class:"card-body p-2 d-flex align-items-center todo-cursor",onClick:e=>n.moveToPage(o.docId)},[(0,s._)("div",L,[(0,s.wy)((0,s._)("input",{class:"ml-2 mr-2",type:"checkbox","onUpdate:modelValue":e=>o.isCompleted=e,onChange:o=>n.toggleTodo(t,o),onClick:e[0]||(e[0]=(0,y.iM)((()=>{}),["stop"]))},null,40,h),[[y.e8,o.isCompleted]])]),(0,s._)("div",S,[(0,s._)("div",w,[(0,s._)("div",F,[(0,s._)("label",{class:(0,E.C_)(["form-check-label",{check:o.isCompleted}])},(0,E.zw)(o.subject),3)]),(0,s._)("div",U,[(0,s._)("button",{class:"btn btn-danger btm-sm",type:"button",onClick:(0,y.iM)((e=>n.openModal(o.docId)),["stop"])},N,8,f)])])])],8,C)])))),128)),((0,s.wg)(),(0,s.j4)(s.lR,{to:"#modal"},[n.showModal?((0,s.wg)(),(0,s.j4)(l,{key:0,onClose:n.closeModal,onDelete:n.deleteTodo},null,8,["onClose","onDelete"])):(0,s.kq)("",!0)]))],64)}const R=(0,s.Uk)(" 정말 삭제하시겠습니까? "),G={class:"btn-group me-2"},P={class:"btn-group me-2"};function V(o,e,t,n,a,d){const l=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(l,null,{modalTitle:(0,s.w5)((()=>[R])),modalBody:(0,s.w5)((()=>[(0,s._)("div",G,[(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=(...o)=>n.onDelete&&n.onDelete(...o))}," 삭제 ")]),(0,s._)("div",P,[(0,s._)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...o)=>n.onClose&&n.onClose(...o))}," 취소 ")])])),_:1})}const x={class:"modal-wrapper"},M={class:"modal-dialog"},j={class:"modal-content"},H={class:"modal-header"},J={class:"modal-title"},q={class:"modal-body"},Z={class:"modal-footer"};function $(o,e,t,n,a,d){return(0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("div",M,[(0,s._)("div",j,[(0,s._)("div",H,[(0,s._)("h5",J,[(0,s.WI)(o.$slots,"modalTitle",{},void 0,!0)])]),(0,s._)("div",q,[(0,s.WI)(o.$slots,"modalBody",{},void 0,!0)]),(0,s._)("div",Z,[(0,s.WI)(o.$slots,"modalFooter",{},void 0,!0)])])])])}var W={name:"ModalComponent"},K=t(89);const B=(0,K.Z)(W,[["render",$],["__scopeId","data-v-3a09cb70"]]);var X=B,Y={name:"TodoDetail",components:{Modal:X},emits:["close","delete"],setup(o,{emit:e}){const t=()=>{e("close")},s=()=>{e("delete")};return{onClose:t,onDelete:s}}};const z=(0,K.Z)(Y,[["render",V]]);var Q=z,oo={name:"TodoList",components:{TodoDetail:Q},props:{todos:{type:Array,required:!0}},emits:["toggle-todo","delete-todo"],setup(o,{emit:e}){const t=(0,m.iH)(null),s=(0,m.iH)(!1),n=o=>{t.value=o,s.value=!0},a=()=>{t.value=null,s.value=!1},d=()=>{e("delete-todo",t.value),t.value=null,s.value=!1},l=(o,t)=>{e("toggle-todo",o,t.target.checked)},c=o=>{v.Z.push({name:"Todo",params:{id:o}})};return{showModal:s,openModal:n,closeModal:a,deleteTodo:d,toggleTodo:l,moveToPage:c}}};const eo=(0,K.Z)(oo,[["render",k],["__scopeId","data-v-dfd377da"]]);var to=eo;const so={class:"d-flex"},no={class:"input-group mb-3"};function ao(o,e,t,n,a,d){return(0,s.wg)(),(0,s.iD)("div",so,[(0,s._)("div",no,[(0,s.wy)((0,s._)("input",{onKeyup:e[0]||(e[0]=(0,y.D2)(((...o)=>n.addTodo&&n.addTodo(...o)),["enter"])),class:"form-control",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>n.todo=o),placeholder:"추가할 할 일 입력",maxlength:"30"},null,544),[[y.nr,n.todo]]),(0,s._)("button",{onClick:e[2]||(e[2]=(...o)=>n.addTodo&&n.addTodo(...o)),class:"btn btn-success",type:"button"}," 추가 ")])])}var lo={name:"TodoForm",emits:["add-todo"],setup(o,{emit:e}){const t=(0,T.oR)(),s=(0,m.iH)(null),n=()=>{s.value=(0,O.bG)().uid};n();const a=(0,m.iH)(""),d=()=>{""===a.value||null===a.value?t.dispatch("toast/triggerToast",D.O.INVALID_TODO_INFO):(e("add-todo",{userId:s.value,subject:a.value,uploadDate:Date.now(),isCompleted:!1,enabled:!0}),a.value="")};return{todo:a,addTodo:d}}};const co=(0,K.Z)(lo,[["render",ao]]);var io=co,ro={name:"TodoIndex",components:{ToDoList:to,TodoForm:io},setup(){const o=(0,T.oR)(),e=(0,m.iH)(!1),t=(0,m.iH)(!1),n=(0,m.iH)(""),a=(0,m.iH)([]),d=async()=>{if((0,O.bG)())try{n.value=(0,O.bG)().uid,t.value=!0,e.value=!1,a.value=await(0,I.hL)(n.value),e.value=!0}catch(s){o.dispatch("toast/triggerToast",D.O.FAILED_TODOS_INFO)}else t.value=!1};(0,s.bv)((()=>{d()}));const l=async e=>{try{const o={userId:e.userId,subject:e.subject,uploadDate:e.uploadDate,isCompleted:e.isCompleted,enabled:e.enabled};await(0,I.JV)(o),d()}catch(t){o.dispatch("toast/triggerToast",D.O.FAILED_CREATE_TODO_INFO)}},c=async(e,t)=>{const s=a.value[e].docId;try{await(0,I.SO)(s,t),o.dispatch("toast/triggerToast",D.O.SUCCESS_UPDATE_TODO_INFO),d()}catch(n){o.dispatch("toast/triggerToast",D.O.FAILED_UPDATE_TODO_INFO)}},i=async e=>{try{await(0,I.TC)(e),o.dispatch("toast/triggerToast",D.O.SUCCESS_DELETE_TODO_INFO),d()}catch(t){console.log(t),o.dispatch("toast/triggerToast",D.O.FAILED_DELETE_TODO_INFO)}},r=()=>{v.Z.push({name:"Login"})};return{loading:e,isLogin:t,todos:a,getTodos:d,addTodo:l,toggleTodo:c,deleteTodo:i,moveToLogin:r}}};const uo=(0,K.Z)(ro,[["render",p],["__scopeId","data-v-23a36237"]]);var go=uo}}]);
//# sourceMappingURL=566.4ba34540.js.map